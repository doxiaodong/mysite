function initImgName(){for(var e in emotion.SmilmgName){var t=emotion.SmilmgName[e],n=emotion.SmileyBox[e],r="";if(n.length)return;for(var i=1;i<=t[1];i++)r=t[0],i<10&&(r+="0"),r=r+i+".gif",n.push(r)}}function initEvtHandler(e){var t=$G(e);for(var n=0,r=0;n<t.childNodes.length;n++){var i=t.childNodes[n];i.nodeType==1&&(domUtils.on(i,"click",function(e){return function(){switchTab(e)}}(r)),r++)}switchTab(0),$G("tabIconReview").style.display="none"}function InsertSmiley(e,t){var n={src:editor.options.emotionLocalization?editor.options.UEDITOR_HOME_URL+"dialogs/emotion/"+e:e};n._src=n.src,editor.execCommand("insertimage",n),t.ctrlKey||dialog.popup.hide()}function switchTab(e){autoHeight(e),emotion.tabExist[e]==0&&(emotion.tabExist[e]=1,createTab("tab"+e));var t=$G("tabHeads").getElementsByTagName("span"),n=$G("tabBodys").getElementsByTagName("div"),r=0,i=t.length;for(;r<i;r++)t[r].className="",n[r].style.display="none";t[e].className="focus",n[e].style.display="block"}function autoHeight(e){var t=dialog.getDom("iframe"),n=t.parentNode.parentNode;switch(e){case 0:t.style.height="380px",n.style.height="392px";break;case 1:t.style.height="220px",n.style.height="232px";break;case 2:t.style.height="260px",n.style.height="272px";break;case 3:t.style.height="300px",n.style.height="312px";break;case 4:t.style.height="140px",n.style.height="152px";break;case 5:t.style.height="260px",n.style.height="272px";break;case 6:t.style.height="230px",n.style.height="242px";break;default:}}function createTab(e){var t="?v=1.1",n=$G(e),r=emotion.SmileyPath+emotion.imageFolders[e],i=5.5,s=iHeight=35,o=3,u=emotion.imageCss[e],a=emotion.imageCssOffset[e],f=['<table class="smileytable">'],l=0,c=emotion.SmileyBox[e].length,h=11,p,d,v,m,g,y;for(;l<c;){f.push("<tr>");for(var b=0;b<h;b++,l++)p=emotion.SmileyBox[e][l],p?(d=r+p+t,v=r+p,m=b<i?0:1,g=a*l*-1-1,y=emotion.SmileyInfor[e][l],f.push('<td  class="'+u+'"   border="1" width="'+o+'%" style="border-collapse:collapse;" align="center"  bgcolor="transparent" onclick="InsertSmiley(\''+v.replace(/'/g,"\\'")+"',event)\" onmouseover=\"over(this,'"+d+"','"+m+'\')" onmouseout="out(this)">'),f.push("<span>"),f.push('<img  style="background-position:left '+g+'px;" title="'+y+'" src="'+emotion.SmileyPath+(editor.options.emotionLocalization?'0.gif" width="':'default/0.gif" width="')+s+'" height="'+iHeight+'"></img>'),f.push("</span>")):f.push('<td width="'+o+'%"   bgcolor="#FFFFFF">'),f.push("</td>");f.push("</tr>")}f.push("</table>"),f=f.join(""),n.innerHTML=f}function over(e,t,n){e.style.backgroundColor="#ACCD3C",$G("faceReview").style.backgroundImage="url("+t+")",n==1&&($G("tabIconReview").className="show"),$G("tabIconReview").style.display="block"}function out(e){e.style.backgroundColor="transparent";var t=$G("tabIconReview");t.className="",t.style.display="none"}function createTabList(e){var t={};for(var n=0;n<e;n++)t["tab"+n]=[];return t}function createArr(e){var t=[];for(var n=0;n<e;n++)t[n]=0;return t}window.onload=function(){editor.setOpt({emotionLocalization:!1}),emotion.SmileyPath=editor.options.emotionLocalization===!0?"images/":"http://img.baidu.com/hi/",emotion.SmileyBox=createTabList(emotion.tabNum),emotion.tabExist=createArr(emotion.tabNum),initImgName(),initEvtHandler("tabHeads")};