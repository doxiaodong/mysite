/**
 * @license Highcharts JS v3.0.6 (2013-10-04)
 * Exporting module
 *
 * (c) 2010-2013 Torstein Hønsi
 *
 * License: www.highcharts.com/license
 */

(function(e){var t=e.Chart,n=e.addEvent,r=e.removeEvent,i=e.createElement,s=e.discardElement,o=e.css,u=e.merge,a=e.each,f=e.extend,l=Math,c=l.max,h=document,p=window,d=e.isTouchDevice,v="M",m="L",g="div",y="hidden",b="none",w="highcharts-",E="absolute",S="px",x,T=e.Renderer.prototype.symbols,N=e.getOptions(),C;f(N.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),N.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:b,color:"#303030",fontSize:d?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},N.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:w+"contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},e.post=function(e,t){var n,r;r=i("form",{method:"post",action:e,enctype:"multipart/form-data"},{display:b},h.body);for(n in t)i("input",{type:y,name:n,value:t[n]},null,r);r.submit(),s(r)},f(t.prototype,{getSVG:function(t){var n=this,r,o,l,c,p,d,v,m,y=u(n.options,t);return h.createElementNS||(h.createElementNS=function(e,t){return h.createElement(t)}),o=i(g,null,{position:E,top:"-9999em",width:n.chartWidth+S,height:n.chartHeight+S},h.body),v=n.renderTo.style.width,m=n.renderTo.style.height,p=y.exporting.sourceWidth||y.chart.width||/px$/.test(v)&&parseInt(v,10)||600,d=y.exporting.sourceHeight||y.chart.height||/px$/.test(m)&&parseInt(m,10)||400,f(y.chart,{animation:!1,renderTo:o,forExport:!0,width:p,height:d}),y.exporting.enabled=!1,y.series=[],a(n.series,function(e){c=u(e.options,{animation:!1,showCheckbox:!1,visible:e.visible}),c.isInternal||y.series.push(c)}),r=new e.Chart(y,n.callback),a(["xAxis","yAxis"],function(e){a(n[e],function(t,n){var i=r[e][n],s=t.getExtremes(),o=s.userMin,u=s.userMax;i&&(o!==x||u!==x)&&i.setExtremes(o,u,!0,!1)})}),l=r.container.innerHTML,y=null,r.destroy(),s(o),l=l.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/id=([^" >]+)/g,'id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(e){return e.toLowerCase()}),l=l.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'"),l},exportChart:function(t,n){t=t||{};var r=this,i=r.options.exporting,s=r.getSVG(u({chart:{borderRadius:0}},i.chartOptions,n,{exporting:{sourceWidth:t.sourceWidth||i.sourceWidth,sourceHeight:t.sourceHeight||i.sourceHeight}}));t=u(r.options.exporting,t),e.post(t.url,{filename:t.filename||"chart",type:t.type,width:t.width||0,scale:t.scale||2,svg:s})},print:function(){var e=this,t=e.container,n=[],r=t.parentNode,i=h.body,s=i.childNodes;if(e.isPrinting)return;e.isPrinting=!0,a(s,function(e,t){e.nodeType===1&&(n[t]=e.style.display,e.style.display=b)}),i.appendChild(t),p.focus(),p.print(),setTimeout(function(){r.appendChild(t),a(s,function(e,t){e.nodeType===1&&(e.style.display=n[t])}),e.isPrinting=!1},1e3)},contextMenu:function(e,t,r,s,u,l,h){var p=this,d=p.options.navigation,v=d.menuItemStyle,m=p.chartWidth,y=p.chartHeight,w="cache-"+e,x=p[w],T=c(u,l),N="3px 3px 10px #888",C,k,L,A;x||(p[w]=x=i(g,{className:e},{position:E,zIndex:1e3,padding:T+S},p.container),C=i(g,null,f({MozBoxShadow:N,WebkitBoxShadow:N,boxShadow:N},d.menuStyle),x),k=function(){o(x,{display:b}),h&&h.setState(0),p.openMenu=!1},n(x,"mouseleave",function(){L=setTimeout(k,500)}),n(x,"mouseenter",function(){clearTimeout(L)}),n(document,"mousedown",function(t){p.pointer.inClass(t.target,e)||k()}),a(t,function(e){if(e){var t=e.separator?i("hr",null,null,C):i(g,{onmouseover:function(){o(this,d.menuItemHoverStyle)},onmouseout:function(){o(this,v)},onclick:function(){k(),e.onclick.apply(p,arguments)},innerHTML:e.text||p.options.lang[e.textKey]},f({cursor:"pointer"},v),C);p.exportDivElements.push(t)}}),p.exportDivElements.push(C,x),p.exportMenuWidth=x.offsetWidth,p.exportMenuHeight=x.offsetHeight),A={display:"block"},r+p.exportMenuWidth>m?A.right=m-r-u-T+S:A.left=r-T+S,s+l+p.exportMenuHeight>y&&h.alignOptions.verticalAlign!=="top"?A.bottom=y-s-T+S:A.top=s+l-T+S,o(x,A),p.openMenu=!0},addButton:function(t){var n=this,r=n.renderer,i=u(n.options.navigation.buttonOptions,t),s=i.onclick,o=i.menuItems,a,l,c={stroke:i.symbolStroke,fill:i.symbolFill},h=i.symbolSize||12;n.btnCount||(n.btnCount=0),n.exportDivElements||(n.exportDivElements=[],n.exportSVGElements=[]);if(i.enabled===!1)return;var p=i.theme,d=p.states,v=d&&d.hover,m=d&&d.select,g;delete p.states,s?g=function(){s.apply(n,arguments)}:o&&(g=function(){n.contextMenu(l.menuClassName,o,l.translateX,l.translateY,l.width,l.height,l),l.setState(2)}),i.text&&i.symbol?p.paddingLeft=e.pick(p.paddingLeft,25):i.text||f(p,{width:i.width,height:i.height,padding:0}),l=r.button(i.text,0,0,g,p,v,m).attr({title:n.options.lang[i._titleKey],"stroke-linecap":"round"}),l.menuClassName=t.menuClassName||w+"menu-"+n.btnCount++,i.symbol&&(a=r.symbol(i.symbol,i.symbolX-h/2,i.symbolY-h/2,h,h).attr(f(c,{"stroke-width":i.symbolStrokeWidth||1,zIndex:1})).add(l)),l.add().align(f(i,{width:l.width,x:e.pick(i.x,C)}),!0,"spacingBox"),C+=(l.width+i.buttonSpacing)*(i.align==="right"?-1:1),n.exportSVGElements.push(l,a)},destroyExport:function(e){var t=e.target,n,i;for(n=0;n<t.exportSVGElements.length;n++)i=t.exportSVGElements[n],i&&(i.onclick=i.ontouchstart=null,t.exportSVGElements[n]=i.destroy());for(n=0;n<t.exportDivElements.length;n++)i=t.exportDivElements[n],r(i,"mouseleave"),t.exportDivElements[n]=i.onmouseout=i.onmouseover=i.ontouchstart=i.onclick=null,s(i)}}),T.menu=function(e,t,n,r){var i=[v,e,t+2.5,m,e+n,t+2.5,v,e,t+r/2+.5,m,e+n,t+r/2+.5,v,e,t+r-1.5,m,e+n,t+r-1.5];return i},t.prototype.callbacks.push(function(e){var t,r=e.options.exporting,i=r.buttons;C=0;if(r.enabled!==!1){for(t in i)e.addButton(i[t]);n(e,"destroy",e.destroyExport)}})})(Highcharts);