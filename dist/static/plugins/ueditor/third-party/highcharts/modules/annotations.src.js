(function(e,t){function l(e){var t,n;return n={xAxis:0,yAxis:0,title:{style:{},text:"",x:0,y:0},shape:{params:{stroke:"#000000",fill:"transparent",strokeWidth:2}}},t={circle:{params:{x:0,y:0}}},t[e]&&(n.shape=f(n.shape,t[e])),n}function c(e){return Object.prototype.toString.call(e)==="[object Array]"}function h(e){return typeof e=="number"}function p(e){return e!==n&&e!==null}function d(e,t,n,r,i){var s=e.length,o=0;while(o<s)typeof e[o]=="number"&&typeof e[o+1]=="number"?(e[o]=t.toPixels(e[o])-r,e[o+1]=n.toPixels(e[o+1])-i,o+=2):o+=1;return e}var n,r,i,s=e.Chart,o=e.extend,u=e.each;i=["path","rect","circle"],r={top:0,left:0,center:.5,middle:.5,bottom:1,right:1};var a=t.inArray,f=e.merge,v=function(){this.init.apply(this,arguments)};v.prototype={init:function(e,t){var n=t.shape&&t.shape.type;this.chart=e,this.options=f({},l(n),t)},render:function(e){var t=this,n=this.chart,r=t.chart.renderer,s=t.group,o=t.title,u=t.shape,f=t.options,l=f.title,c=f.shape;s||(s=t.group=r.g()),!u&&c&&a(c.type,i)!==-1&&(u=t.shape=r[f.shape.type](c.params),u.add(s)),!o&&l&&(o=t.title=r.label(l),o.add(s)),s.add(n.annotations.group),t.linkObjects(),e!==!1&&t.redraw()},redraw:function(){var t=this.options,n=this.chart,i=this.group,s=this.title,u=this.shape,f=this.linkedObject,l=n.xAxis[t.xAxis],c=n.yAxis[t.yAxis],v=t.width,m=t.height,g=r[t.anchorY],y=r[t.anchorX],b=!1,w,E,S,x,T,N,C;f&&(E=f instanceof e.Point?"point":f instanceof e.Series?"series":null,E==="point"?(t.xValue=f.x,t.yValue=f.y,S=f.series):E==="series"&&(S=f),i.visibility!==S.group.visibility&&i.attr({visibility:S.group.visibility})),N=p(t.xValue)?l.toPixels(t.xValue+l.minPointOffset)-l.minPixelPadding:t.x,C=p(t.yValue)?c.toPixels(t.yValue):t.y;if(isNaN(N)||isNaN(C)||!h(N)||!h(C))return;s&&(s.attr(t.title),s.css(t.title.style),b=!0);if(u){w=o({},t.shape.params);if(t.units==="values"){for(x in w)a(x,["width","x"])>-1?w[x]=l.translate(w[x]):a(x,["height","y"])>-1&&(w[x]=c.translate(w[x]));w.width&&(w.width-=l.toPixels(0)-l.left),w.x&&(w.x+=l.minPixelPadding),t.shape.type==="path"&&d(w.d,l,c,N,C)}t.shape.type==="circle"&&(w.x+=w.r,w.y+=w.r),b=!0,u.attr(w)}i.bBox=null,h(v)||(T=i.getBBox(),v=T.width),h(m)||(T||(T=i.getBBox()),m=T.height),h(y)||(y=r.center),h(g)||(g=r.center),N-=v*y,C-=m*g,n.animation&&p(i.translateX)&&p(i.translateY)?i.animate({translateX:N,translateY:C}):i.translate(N,C)},destroy:function(){var e=this,t=this.chart,n=t.annotations.allItems,r=n.indexOf(e);r>-1&&n.splice(r,1),u(["title","shape","group"],function(t){e[t]&&(e[t].destroy(),e[t]=null)}),e.group=e.title=e.shape=e.chart=e.options=null},update:function(e,t){o(this.options,e),this.linkObjects(),this.render(t)},linkObjects:function(){var e=this,t=e.chart,n=e.linkedObject,r=n&&(n.id||n.options.id),i=e.options,s=i.linkedTo;if(!p(s))e.linkedObject=null;else if(!p(n)||s!==r)e.linkedObject=t.get(s)}},o(s.prototype,{annotations:{add:function(e,t){var n=this.allItems,r=this.chart,i,s;c(e)||(e=[e]),s=e.length;while(s--)i=new v(r,e[s]),n.push(i),i.render(t)},redraw:function(){u(this.allItems,function(e){e.redraw()})}}}),s.prototype.callbacks.push(function(t){var n=t.options.annotations,r;r=t.renderer.g("annotations"),r.attr({zIndex:7}),r.add(),t.annotations.allItems=[],t.annotations.chart=t,t.annotations.group=r,c(n)&&n.length>0&&t.annotations.add(t.options.annotations),e.addEvent(t,"redraw",function(){t.annotations.redraw()})})})(Highcharts,HighchartsAdapter);